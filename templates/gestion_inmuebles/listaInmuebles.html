
{% extends 'base.html' %}
{% load static %} 
{% block content %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Inmuebles</title>
    <link rel="stylesheet" href="{% static 'styles/listaInmuebles.css' %}">
</head>
<body>
    <div class="titulo">
        <h1>Inmuebles</h1>
    </div>

    <div class="filtros">
        <form method="get" class="filtro-form">
            <label for="tipo">Tipo:</label>
            <select name="tipo" id="tipo">
                <option value="">Todos</option>
                <option value="Departamento" {% if request.GET.tipo == "Departamento" %}selected{% endif %}>Departamento</option>
                <option value="Casa" {% if request.GET.tipo == "Casa" %}selected{% endif %}>Casa</option>
                <option value="Local" {% if request.GET.tipo == "Local" %}selected{% endif %}>Local</option>
                <option value="Cochera" {% if request.GET.tipo == "Cochera" %}selected{% endif %}>Cochera</option>
            </select>

            <label for="orden_precio">Ordenar por precio:</label>
            <select name="orden_precio" id="orden_precio">
                <option value="">---</option>
                <option value="asc" {% if request.GET.orden_precio == "asc" %}selected{% endif %}>Menor a mayor</option>
                <option value="desc" {% if request.GET.orden_precio == "desc" %}selected{% endif %}>Mayor a menor</option>
            </select>     

            <label for="orden_superficie">Ordenar por superficie:</label>
            <select name="orden_superficie" id="orden_superficie">
                <option value="">---</option>
                <option value="asc" {% if request.GET.orden_superficie == "asc" %}selected{% endif %}>Menor a mayor</option>
                <option value="desc" {% if request.GET.orden_superficie == "desc" %}selected{% endif %}>Mayor a menor</option>
            </select>

            <button type="submit">Filtrar</button>
        </form>
    </div>

    <div class="container">
    {% for inmueble in inmuebles %}
        {% with inmueble=inmueble.objeto tipo=inmueble.tipo %}
            <a href="{% url 'inmueble_detalle' inmueble.id %}" class="card-link">
                <div class="card">
                    {% if inmueble.imagen %}
                        <img src="{{ inmueble.imagen.url }}" alt="Imagen de {{ inmueble.nombre }}">
                    {% endif %}
                <div class="card-content">
                    <h2>{{ inmueble.nombre }}</h2>
                    <p><strong>Tipo:</strong> {{ inmueble.tipo }}</p>
                    <p><strong>Precio:</strong> ${{ inmueble.precio }}</p>
                    <p><strong>Calle:</strong> {{ inmueble.calle }}</p>
                    <p><strong>Número:</strong> {{ inmueble.numero }}</p>
                    <p><strong>Provincia:</strong> {{ inmueble.provincia }}</p>
                    <p><strong>Ciudad:</strong> {{ inmueble.ciudad }}</p>
                    <p><strong>Estado:</strong> {{ inmueble.get_estado_display }}</p>
                    <p><strong>Superficie:</strong> {{ inmueble.superficie }} m²</p>
                    {% if inmueble.tipo == "Departamento" or inmueble.tipo == "Casa" %}
                        <p><strong>Habitaciones:</strong> {{ inmueble.habitaciones }}</p>
                        <p><strong>Baños:</strong> {{ inmueble.banios }}</p>
                        <p><strong>Cochera:</strong> {{ inmueble.tiene_cochera|yesno:"Sí,No" }}</p>
                        <p><strong>Internet:</strong> {{ inmueble.tiene_internet|yesno:"Sí,No" }}</p>
                    {% elif inmueble.tipo == "Local" %}
                        <p><strong>Habitaciones:</strong> {{ inmueble.habitaciones }}</p>
                        <p><strong>Frente:</strong> {{ inmueble.frente }} m</p>
                        <p><strong>Fondo:</strong> {{ inmueble.fondo }} m</p>                        
                    {% elif inmueble.tipo == "Cochera" %}
                        <p><strong>Tipo de Cochera:</strong> {{ inmueble.tipo_cochera }}</p>
                        <p><strong>Largo plaza:</strong> {{ inmueble.largo_plaza }} m</p>
                        <p><strong>Ancho plaza:</strong> {{ inmueble.ancho_plaza }} m</p>
                        <p><strong>Plazas:</strong> {{ inmueble.plazas }}</p>
                    {% endif %}

                    {% if inmueble.descripcion %}
                    <p><strong>Descripción:</strong> {{ inmueble.descripcion }}</p>
                    {% endif %}
                </div>
                </div>
            {% endwith %}
    {% empty %}
        <p>No hay inmuebles disponibles.</p>
    {% endfor %}
    </div>
    


</body>
</html>
{% endblock %}